webpackJsonp([1],{"+sKR":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[t.nonograms.length>0?n("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.nonograms,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[n("tr",{directives:[{name:"ripple",rawName:"v-ripple"}],on:{click:function(n){t.startEditNonogram(e.item.id)}}},[n("td",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"text-xs-right"},[t._v(t._s(e.item.name||"Нонограмма №"+(e.item.id+1)))]),t._v(" "),n("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.numberRows))]),t._v(" "),n("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.numberColumns))]),t._v(" "),n("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.numberColors))]),t._v(" "),n("td",{staticClass:"text-xs-right"},[t._v(t._s(t.moment(e.item.createTimestamp).format("DD MMMM, HH:mm")))])])]}}])}):n("p",{staticClass:"text-xs-center"},[t._v("\n    Здесь будут отображаться кроссворды, создание которых ещё не завершено.\n  ")])],1)},r=[],s={render:a,staticRenderFns:r};e.a=s},"/wyP":function(t,e){},"1J0P":function(t,e,n){"use strict";function a(t){n("Ck36")}var r=n("6HLw"),s=n("vLLJ"),o=n("VU/8"),i=a,l=o(r.a,s.a,!1,i,null,null);e.a=l.exports},"2nnM":function(t,e,n){"use strict";var a=n("Zrlr"),r=n.n(a),s=n("wxAW"),o=n.n(s),i=(n("IP1U"),n("inB1")),l=function(){function t(){r()(this,t)}return o()(t,[{key:"extendFieldIfRequired",value:function(){var t=this.field.length,e=this.field[0].length;if(!(t>=this.numberRows&&e>=this.numberColumns)){for(var n=Math.max(this.numberRows,t),a=Math.max(this.numberColumns,e),r=Object(i.a)(n,a),s=0;s<n;++s)for(var o=0;o<a;++o){var l=s<t&&o<e;r[s][o]=l?this.field[s][o]:-1}this.field=r}}}],[{key:"createNewNonogram",value:function(e,n,a){var r=new t;return r.name="",r.nameEnglish="",r.numberRows=e,r.numberColumns=n,r.numberColors=a,r.colors=["black","#f44336","#b71c1c","#ffc107","#303f9f","#03a9f4","#7b1fa2","#c2185b","#388e3c","#00e676"].map(function(t){return{hex:t}}),r.field=[[]],r.createTimestamp=Date.now(),r.extendFieldIfRequired(),r}}]),t}();e.a=l},"3M0p":function(t,e,n){"use strict";function a(t){n("rSiG")}var r=n("D25U"),s=n("tziZ"),o=n("VU/8"),i=a,l=o(r.a,s.a,!1,i,"data-v-5d95a86f",null);l.exports},"4AER":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;return(t._self._c||e)("table",{ref:"table",staticClass:"field",on:{click:function(e){t.onTableClick(e)}}})},r=[],s={render:a,staticRenderFns:r};e.a=s},"6HLw":function(t,e,n){"use strict";e.a={}},"7qNL":function(t,e){},"7zck":function(t,e){},"9ygJ":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fullscreen"},[t.nonogramData?n("nonogram-table",{attrs:{nonogramData:t.nonogramData}}):t._e()],1)},r=[],s={render:a,staticRenderFns:r};e.a=s},AoBK:function(t,e,n){"use strict";var a=n("Xxa5"),r=n.n(a),s=n("exGp"),o=n.n(s),i=n("mtWM"),l=n.n(i),c=n("b52N"),u=n("kCAv");e.a={components:{NonogramTable:u.a},data:function(){return{nonogramData:null}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;return o()(r.a.mark(function e(){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("http://localhost/nonograms/black-white/"+t.$route.params.id);case 2:n=e.sent.data,t.nonogramData=new c.a(n);case 4:case"end":return e.stop()}},e,t)}))()}}}},Ck36:function(t,e){},D25U:function(t,e,n){"use strict";var a=n("Zrlr"),r=n.n(a),s=n("wxAW"),o=n.n(s),i=[[7],[1,1],[1,1],[1,1],[7],[6,6],[15],[2,2],[1,1,1,1],[1,1],[1,5,1],[3,1,3],[3],[3],[1]],l=[[1],[2],[2,1],[3,1],[10,1],[1,3,2],[1,3,1,1,2],[1,1,1,5],[1,3,1,1,2],[1,3,2],[10,1],[3,1],[2,1],[2],[1]],c=i.length,u=l.length,h=function(t,e){return t*(e+1)-1},d=function(){function t(e){r()(this,t),this.canvas=e,this.context=e.getContext("2d"),this.onResize()}return o()(t,[{key:"onResize",value:function(){this.canvas.height=this.canvas.clientHeight,this.canvas.width=this.canvas.clientWidth}},{key:"calculateSizes",value:function(){var t=this.height-10+2,e=this.width-10+2,n=Math.round(t/(c+5))-1,a=Math.round(e/(u+4))-1;return Math.min(n,a)}},{key:"draw",value:function(){var t=this.calculateSizes(),e=h(4,t)+2,n=h(5,t)+2,a=h(u,t)+2,r=h(c,t)+2,s=n+r+1+4,o=e+a+1+4,i=Math.round((this.height-s)/2),l=Math.round((this.width-o)/2);this.context.translate(l,i),this.context.fillStyle="#009688",this.context.fillRect(0,0,o,s),this.context.translate(2,2),this.context.fillStyle="#4db6ac",this.context.fillRect(0,0,e,n),this.context.fillStyle="#e0f2f1",this.context.fillRect(1,1,e-2,n-2);this.drawField(e+1,0,5,u,"#b2dfdb",1,t),this.drawField(0,n+1,c,4,"#b2dfdb",1,t),this.drawField(e+1,n+1,c,u,"white",1,t)}},{key:"drawField",value:function(t,e,n,a,r,s,o){this.context.save(),this.context.translate(t,e);var i=h(n,o)+2*s,l=h(a,o)+2*s;this.context.fillStyle="#4db6ac",this.context.fillRect(0,0,l,i),this.context.translate(s,s),this.context.fillStyle=r;for(var c=0;c<n;++c)for(var u=0;u<a;++u){var d=c*(o+1),f=u*(o+1);this.context.fillRect(f,d,o,o)}this.context.restore()}},{key:"height",get:function(){return this.canvas.height}},{key:"width",get:function(){return this.canvas.width}}]),t}();e.a={name:"nanogram",data:function(){return{height:i.length,width:l.length}},mounted:function(){console.clear();var t=this.$refs.canvas;this.draw=new d(t),this.draw.draw(),window.addEventListener("resize",this.onResize)},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},methods:{onResize:function(){this.$refs.canvas.style.removeProperty("height"),this.$refs.canvas.style.removeProperty("width"),this.draw.onResize(),this.draw.draw()}}}},DkN1:function(t,e,n){"use strict";function a(t){n("H60a")}var r=n("AoBK"),s=n("9ygJ"),o=n("VU/8"),i=a,l=o(r.a,s.a,!1,i,"data-v-2d122836",null);e.a=l.exports},"E5+8":function(t,e){},"F+Dt":function(t,e,n){"use strict";var a=n("woOf"),r=n.n(a),s=n("ND+T");e.a={props:["startEditNonogram"],data:function(){return{headers:[{text:"Название"},{text:"Число строк"},{text:"Число столбцоа"},{text:"Число цветов"},{text:"Дата создания"}].map(function(t){return r()(t,{sortable:!1})}),nonograms:s.a.getAllNonograms()}}}},FV1R:function(t,e,n){"use strict";var a=n("qNNU"),r=n("bb0t"),s=n("ND+T");e.a={components:{NonogramCreator:a.a,NonogramList:r.a},data:function(){return{activeTab:"tabEditor"}},methods:{startEditNonogram:function(t){this.$refs.nonogramCreator.startEditAnotherNonogram(t),s.a.lastNonogramId=t,this.activeTab="tabEditor"}}}},FtPH:function(t,e){},GX7y:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("div",{ref:"nonogram",staticClass:"nonogram"},[n("table",{staticClass:"main"},[n("tr",[t._m(0),t._v(" "),n("td",[n("table",{staticClass:"field header horizontal-blocks-border"},t._l(t.nonogramData.headerTop,function(e){return n("tr",t._l(e,function(e){return n("td",[t._v(t._s(e))])}))}))])]),t._v(" "),n("tr",[n("td",[n("table",{staticClass:"field header vertical-blocks-border"},t._l(t.nonogramData.headerLeft,function(e){return n("tr",t._l(e,function(e){return n("td",[t._v(t._s(e))])}))}))]),t._v(" "),n("td",[n("table",{staticClass:"field horizontal-blocks-border vertical-blocks-border"},t._l(t.nonogramInput.field,function(e,a){return n("tr",t._l(e,function(e,a){return n("td",{class:[{selected:t.nonogramInput.isSelected(e)},e.state.cssClass],on:{contextmenu:function(n){n.preventDefault(),t.nonogramInput.rightClick(e)},click:function(n){t.nonogramInput.click(e)}}},[n("svg",{directives:[{name:"show",rawName:"v-show",value:t.nonogramInput.isCellEmpty(e),expression:"nonogramInput.isCellEmpty(cell)"}],attrs:{fill:"black",height:"100",width:"100",viewBox:"0 0 100 100"}},[n("path",{attrs:{d:"M0,0 L8,0 50,42 92,0 100,0 100,8 58,50 100,92 100,100 92,100 50,58 8,100, 0,100 0,92 42,50 0,8 0,0 0,0"}})])])}))}))])])])])])},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("td",{staticClass:"corner"},[n("div")])}],s={render:a,staticRenderFns:r};e.a=s},H60a:function(t,e){},IP1U:function(t,e,n){"use strict";var a=n("Zrlr"),r=n.n(a),s=n("wxAW"),o=n.n(s),i={UNKNOWN:{id:0,cssClass:"unknown"},FILLED:{id:1,cssClass:"filled"},EMPTY:{id:2,cssClass:"empty"}};!function(){function t(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r()(this,t),this.i=e,this.j=n,this.color=a,this.state=i.UNKNOWN}o()(t,[{key:"setUnknown",value:function(){this.state=i.UNKNOWN}},{key:"setFilled",value:function(){this.state=i.FILLED}},{key:"setEmpty",value:function(){this.state=i.EMPTY}}])}()},JU1R:function(t,e,n){"use strict";var a=n("7+uW"),r=n("/ocq"),s=(n("3M0p"),n("kCAv"),n("DkN1")),o=n("YWcF"),i=n("1J0P");n("ZHwJ");a.a.use(r.a),e.a=new r.a({mode:"history",routes:[{path:"/",redirect:"/nonograms/create"},{path:"/nonograms/black-white/:id",component:s.a},{path:"/nonograms/create",component:o.a},{path:"/t",component:i.a}]})},M93x:function(t,e,n){"use strict";function a(t){n("7qNL")}var r=n("xJD8"),s=n("pAu9"),o=n("VU/8"),i=a,l=o(r.a,s.a,!1,i,null,null);e.a=l.exports},MbgV:function(t,e,n){"use strict";e.a={props:{initial:{type:Boolean,default:!1}},data:function(){return{size:{width:-1,height:-1}}},methods:{reset:function(){var t=this.$el.firstChild,e=this.$el.lastChild;t.scrollLeft=1e5,t.scrollTop=1e5,e.scrollLeft=1e5,e.scrollTop=1e5},update:function(){this.size.width=this.$el.offsetWidth,this.size.height=this.$el.offsetHeight}},watch:{size:{deep:!0,handler:function(t){this.reset(),this.$emit("resize",{width:this.size.width,height:this.size.height})}}},render:function(t){var e="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",n="position: absolute; left: 0; top: 0;";return t("div",{style:e+"animation-name: resizeSensorVisibility;",on:{"~animationstart":this.update}},[t("div",{style:e,on:{scroll:this.update}},[t("div",{style:n+"width: 100000px; height: 100000px;"})]),t("div",{style:e,on:{scroll:this.update}},[t("div",{style:n+"width: 200%; height: 200%;"})])])},beforeDestroy:function(){this.$emit("resize",{width:0,height:0}),this.$emit("resizeSensorBeforeDestroy")},mounted:function(){if(!0===this.initial&&this.$nextTick(this.update),this.$el.offsetParent!==this.$el.parentNode&&(this.$el.parentNode.style.position="relative"),"attachEvent"in this.$el&&!("AnimationEvent"in window)){var t=function(){this.update(),e()}.bind(this),e=function(){this.$el.detachEvent("onresize",t),this.$off("resizeSensorBeforeDestroy",e)}.bind(this);this.$el.attachEvent("onresize",t),this.$on("resizeSensorBeforeDestroy",e),this.reset()}}}},Me5U:function(t,e,n){"use strict";function a(t){n("g0kA")}var r=n("yHqk"),s=n("4AER"),o=n("VU/8"),i=a,l=o(r.a,s.a,!1,i,null,null);e.a=l.exports},"ND+T":function(t,e,n){"use strict";n.d(e,"a",function(){return f});var a=n("mvHQ"),r=n.n(a),s=n("woOf"),o=n.n(s),i=n("Zrlr"),l=n.n(i),c=n("wxAW"),u=n.n(c),h=n("2nnM"),d=function(){function t(){l()(this,t)}return u()(t,[{key:"getNonogramKey",value:function(t){return"nonogram_"+t}},{key:"getLastNonogram",value:function(){var t=this.lastNonogramId;return null===t?null:this.getNonogramById(t)}},{key:"getNonogramById",value:function(t){var e=this.getNonogramKey(t),n=JSON.parse(localStorage.getItem(e));return o()(new h.a,n)}},{key:"saveNonogram",value:function(t){if(void 0===t.id){var e=this.numberNonograms;t.id=this.numberNonograms,this.numberNonograms=e+1}localStorage.setItem(this.getNonogramKey(t.id),r()(t)),this.lastNonogramId=t.id}},{key:"getAllNonograms",value:function(){var t=this;return _.range(0,this.numberNonograms).map(function(e){return t.getNonogramById(e)})}},{key:"numberNonograms",get:function(){var t=localStorage.getItem("number_nonograms");return null===t?0:+t},set:function(t){localStorage.setItem("number_nonograms",t)}},{key:"lastNonogramId",get:function(){return localStorage.getItem("last_nonogram_id")},set:function(t){null===t?localStorage.removeItem("last_nonogram_id"):localStorage.setItem("last_nonogram_id",t)}}]),t}(),f=new d},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("W3Iv"),r=n.n(a),s=n("BO1k"),o=n.n(s),i=n("d7EF"),l=n.n(i),c=n("7+uW"),u=n("M93x"),h=n("JU1R"),d=n("3EgV"),f=n.n(d),m=n("7zck"),v=(n.n(m),n("Zzkc")),g=(n.n(v),n("POKh")),b=n("M4fF"),p=n.n(b),C=n("PJh5"),w=n.n(C);w.a.locale("ru"),c.a.set(c.a.prototype,"_",p.a),c.a.set(c.a.prototype,"moment",w.a),c.a.config.productionTip=!1,c.a.use(f.a);var y=[],k=!0,x=!1,j=void 0;try{for(var _,z=o()(y);!(k=(_=z.next()).done);k=!0){var S=_.value;c.a.component(S.name,S)}}catch(t){x=!0,j=t}finally{try{!k&&z.return&&z.return()}finally{if(x)throw j}}var N={"material-picker":v.Material,"compact-picker":v.Compact,"swatches-picker":v.Swatches,"slider-picker":v.Slider,"sketch-picker":v.Sketch,"chrome-picker":v.Chrome,"photoshop-picker":v.Photoshop,"resize-sensor":g.a},D=!0,M=!1,R=void 0;try{for(var E,F=o()(r()(N));!(D=(E=F.next()).done);D=!0){var $=E.value,L=l()($,2),I=L[0],P=L[1];c.a.component(I,P)}}catch(t){M=!0,R=t}finally{try{!D&&F.return&&F.return()}finally{if(M)throw R}}new c.a({el:"#app",router:h.a,template:"<App/>",components:{App:u.a}})},OPXh:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var a=n("Zrlr"),r=n.n(a),s=n("wxAW"),o=n.n(s),i=n("knr3"),l=(n.n(i),n("inB1")),c={UNKNOWN:{id:0,cssClass:"unknown"},FILLED:{id:1,cssClass:"filled"},EMPTY:{id:2,cssClass:"empty"}},u=function(){function t(e,n){r()(this,t),this.i=e,this.j=n,this.state=c.UNKNOWN}return o()(t,[{key:"setUnknown",value:function(){this.state=c.UNKNOWN}},{key:"setFilled",value:function(){this.state=c.FILLED}},{key:"setEmpty",value:function(){this.state=c.EMPTY}}]),t}(),h=function(){function t(e){r()(this,t),this.numberRows=e.numberRows,this.numberColumns=e.numberColumns,this.createField(),this.selectedCell=this.field[0][0],this.showSelectedCell=!1,this.bindKeyboardActions()}return o()(t,[{key:"createField",value:function(){this.field=Object(l.a)(this.numberRows,this.numberColumns);for(var t=0;t<this.numberRows;++t)for(var e=0;e<this.numberColumns;++e)this.field[t][e]=new u(t,e)}},{key:"bindKeyboardActions",value:function(){var t=this;Mousetrap.bind("up",function(){return t.moveSelectedCell(-1,0)}),Mousetrap.bind("down",function(){return t.moveSelectedCell(1,0)}),Mousetrap.bind("left",function(){return t.moveSelectedCell(0,-1)}),Mousetrap.bind("right",function(){return t.moveSelectedCell(0,1)}),Mousetrap.bind("e",function(){return t.selectedCell.setUnknown()},"keydown"),Mousetrap.bind("f",function(){return t.selectedCell.setFilled()},"keydown"),Mousetrap.bind("a",function(){return t.selectedCell.setEmpty()},"keydown")}},{key:"moveSelectedCell",value:function(t,e){var n=Math.max(0,Math.min(this.numberRows-1,this.selectedCell.i+t)),a=Math.max(0,Math.min(this.numberColumns-1,this.selectedCell.j+e));this.selectedCell=this.field[n][a],this.showSelectedCell=!0}},{key:"click",value:function(t){t.setFilled(),this.selectedCell=t,this.showSelectedCell=!1}},{key:"rightClick",value:function(t){t.setEmpty(),this.selectedCell=t,this.showSelectedCell=!1}},{key:"isSelected",value:function(t){return this.showSelectedCell&&t===this.selectedCell}},{key:"isCellEmpty",value:function(t){return t.state===c.EMPTY}}]),t}()},POKh:function(t,e,n){"use strict";function a(t){n("E5+8")}var r=n("MbgV"),s=n("VU/8"),o=a,i=s(r.a,null,!1,o,null,null);e.a=i.exports},TxtR:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-tabs",{ref:"vTabs",staticClass:"mt-3",attrs:{centered:""},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[n("v-tabs-bar",{staticClass:"white"},[n("v-tabs-item",{attrs:{href:"#tabEditor",ripple:""}},[t._v("Редактор японских кроссвордов")]),t._v(" "),n("v-tabs-item",{attrs:{href:"#tabList",ripple:""}},[t._v("Недавно созданные кроссворды")]),t._v(" "),n("v-tabs-slider",{attrs:{color:"teal"}})],1),t._v(" "),n("v-tabs-items",[n("v-tabs-content",{attrs:{id:"tabEditor"}},[n("v-card",{attrs:{flat:""}},[n("v-card-text",[n("nonogram-creator",{ref:"nonogramCreator"})],1)],1)],1),t._v(" "),n("v-tabs-content",{attrs:{id:"tabList",lazy:""}},[n("v-card",{attrs:{flat:""}},[n("v-card-text",[n("nonogram-list",t._b({},"nonogram-list",{startEditNonogram:t.startEditNonogram},!1))],1)],1)],1)],1)],1)},r=[],s={render:a,staticRenderFns:r};e.a=s},"US5/":function(t,e){},Vfvf:function(t,e){},YWcF:function(t,e,n){"use strict";function a(t){n("US5/")}var r=n("FV1R"),s=n("TxtR"),o=n("VU/8"),i=a,l=o(r.a,s.a,!1,i,null,null);e.a=l.exports},ZHwJ:function(t,e,n){"use strict";function a(t){n("Vfvf")}var r=n("caEe"),s=n("hNg6"),o=n("VU/8"),i=a,l=o(r.a,s.a,!1,i,null,null);l.exports},b52N:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var a=n("Gu7T"),r=n.n(a),s=n("Zrlr"),o=n.n(s),i=n("wxAW"),l=n.n(i),c=n("inB1"),u=function(){function t(e){o()(this,t),this.field=e,this.headerLeft=this.createHeaderLeft(e),this.headerTop=Object(c.b)(this.createHeaderLeft(Object(c.b)(e)))}return l()(t,[{key:"createHeaderLeft",value:function(t){for(var e=t.length,n=t[0].length,a=new Array(e),s=0;s<e;++s)for(var o=a[s]=[],i=0;i<n;++i)t[s][i]&&(0!==i&&t[s][i-1]?o.push(o.pop()+1):o.push(1));var l=Math.max.apply(Math,r()(a.map(function(t){return t.length})));return a=a.map(function(t){return new Array(l-t.length).concat(t)})}},{key:"numberRows",get:function(){return this.field.length}},{key:"numberColumns",get:function(){return this.field[0].length}}]),t}()},bb0t:function(t,e,n){"use strict";function a(t){n("jvde")}var r=n("F+Dt"),s=n("+sKR"),o=n("VU/8"),i=a,l=o(r.a,s.a,!1,i,"data-v-35c80557",null);e.a=l.exports},caEe:function(t,e,n){"use strict";e.a={data:function(){return{a:[{v:1},{v:2},{v:3}],b:[1,2,3]}}}},g0kA:function(t,e){},hNg6:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t._.range(t.a.length),function(e){return n("div",[t._v(t._s(t.a[e].v))])}),t._v(" "),t._l(t.a,function(e){return n("div",[t._v(t._s(e.v))])}),t._v(" "),n("v-btn",{on:{click:function(e){t.a[0].v+=1}}},[t._v("clickA")]),t._v(" "),n("v-btn",{on:{click:function(e){t.a.push({v:0})}}},[t._v("pushA")]),t._v(" "),t._l(t._.range(t.b.length),function(e){return n("div",[t._v(t._s(t.b[e]))])}),t._v(" "),t._l(t.b,function(e){return n("div",[t._v(t._s(e))])}),t._v(" "),n("v-btn",{on:{click:function(e){t.b[0]+=1}}},[t._v("clickB")]),t._v(" "),n("v-btn",{on:{click:function(e){t.b.push(0)}}},[t._v("pushB")])],2)},r=[],s={render:a,staticRenderFns:r};e.a=s},hRsL:function(t,e,n){"use strict";var a=n("Zrlr"),r=n.n(a),s=n("wxAW"),o=n.n(s),i=(n("IP1U"),function(){function t(e,n){r()(this,t),this.$parent=n,this.nonogramData=e,this.resetState(),this.bindKeyboardActions()}return o()(t,[{key:"resetState",value:function(){this.currentColor=0,this.selectedCell={i:0,j:0},this.showSelectedCell=!1}},{key:"bindKeyboardActions",value:function(){for(var t=this,e=1;e<=10;++e)!function(e){var n=String.fromCharCode("0".charCodeAt()+e%10);Mousetrap.bind(n,function(){return t.changeColor(e-1)})}(e);Mousetrap.bind("up",function(){return t.moveSelectedCell(-1,0)}),Mousetrap.bind("down",function(){return t.moveSelectedCell(1,0)}),Mousetrap.bind("left",function(){return t.moveSelectedCell(0,-1)}),Mousetrap.bind("right",function(){return t.moveSelectedCell(0,1)}),Mousetrap.bind("f",function(){return t.keyboardToggleCurrentCell()},"keydown"),Mousetrap.bind("-",function(){return t.$parent.decreaseScale()}),Mousetrap.bind(["+","="],function(){return t.$parent.increaseScale()})}},{key:"isSelected",value:function(t,e){return this.showSelectedCell&&this.selectedCell.i===t&&this.selectedCell.j===e}},{key:"moveSelectedCell",value:function(t,e){var n=Math.max(0,Math.min(this.nonogramData.numberRows-1,this.selectedCell.i+t)),a=Math.max(0,Math.min(this.nonogramData.numberColumns-1,this.selectedCell.j+e)),r=this.selectedCell.i,s=this.selectedCell.j;return this.selectedCell={i:n,j:a},this.showSelectedCell=!0,this.$parent.$refs.nonogramCreatorField.updateCell(r,s),this.$parent.$refs.nonogramCreatorField.updateCell(n,a),!1}},{key:"clickCoordinates",value:function(t,e){this.showSelectedCell=!1,this.toggleCell(t,e)}},{key:"keyboardToggleCurrentCell",value:function(){this.showSelectedCell=!0,this.toggleCell(this.selectedCell.i,this.selectedCell.j)}},{key:"toggleCell",value:function(t,e){var n=this.nonogramData.field;n[t][e]===this.currentColor?n[t][e]=-1:n[t][e]=this.currentColor,this.selectedCell={i:t,j:e},this.$parent.$refs.nonogramCreatorField.updateCell(t,e)}},{key:"changeColor",value:function(t){t<this.nonogramData.numberColors&&(this.currentColor=t)}}]),t}());e.a=i},inB1:function(t,e,n){"use strict";function a(t,e){for(var n=new Array(t),a=0;a<t;++a)n[a]=new Array(e);return n}function r(t){for(var e=t.length,n=t[0].length,r=a(n,e),s=0;s<e;++s)for(var o=0;o<n;++o)r[o][s]=t[s][o];return r}e.a=a,e.b=r},jvde:function(t,e){},kCAv:function(t,e,n){"use strict";function a(t){n("/wyP")}var r=n("rOsi"),s=n("GX7y"),o=n("VU/8"),i=a,l=o(r.a,s.a,!1,i,"data-v-011446e0",null);e.a=l.exports},mPy0:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs6:""}},[n("v-text-field",{attrs:{label:"Название кроссворда"},model:{value:t.nonogramData.name,callback:function(e){t.$set(t.nonogramData,"name",e)},expression:"nonogramData.name"}})],1),t._v(" "),n("v-flex",{attrs:{xs6:""}},[n("v-text-field",{attrs:{label:"Название кроссворда (на английском)"},model:{value:t.nonogramData.nameEnglish,callback:function(e){t.$set(t.nonogramData,"nameEnglish",e)},expression:"nonogramData.nameEnglish"}})],1),t._v(" "),n("v-flex",{attrs:{xs6:""}},[n("v-text-field",{attrs:{type:"number",label:"Число строк",min:t.nonogramSizeMin,max:t.nonogramSizeMax},on:{input:function(e){t.recreateFieldDebounced()}},model:{value:t.numberRows,callback:function(e){t.numberRows=e},expression:"numberRows"}})],1),t._v(" "),n("v-flex",{attrs:{xs6:""}},[n("v-text-field",{attrs:{type:"number",label:"Число столбцов",min:t.nonogramSizeMin,max:t.nonogramSizeMax},on:{input:function(e){t.recreateFieldDebounced()}},model:{value:t.numberColumns,callback:function(e){t.numberColumns=e},expression:"numberColumns"}})],1),t._v(" "),n("v-flex",{attrs:{xs6:""}},[n("v-text-field",{attrs:{type:"number",label:"Число цветов",min:t.numberColorsMin,max:t.numberColorsMax},on:{input:function(e){t.updateNumberColorsDebounced()}},model:{value:t.numberColors,callback:function(e){t.numberColors=e},expression:"numberColors"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-layout",[t._l(t._.range(t.nonogramData.numberColors),function(e){return n("v-menu",{attrs:{bottom:"","offset-y":"","open-on-click":!1},model:{value:t.isColorPickerOpen[e],callback:function(n){t.$set(t.isColorPickerOpen,e,n)},expression:"isColorPickerOpen[i]"}},[n("div",{class:["color-square-wrapper mx-1",{"color-square-with-border":t.nonogramInput.currentColor===e}],attrs:{slot:"activator",title:"нажмите, чтобы выбрать цвет\nнажмите правой кнопкой мыши чтобы изменить цвет"},on:{contextmenu:function(n){n.preventDefault(),t.showColorPicker(e)},click:function(n){t.nonogramInput.changeColor(e)}},slot:"activator"},[n("div",{class:["color-square"],style:{backgroundColor:t.nonogramData.colors[e].hex}})]),t._v(" "),n("swatches-picker",{on:{input:function(e){t.$refs.nonogramCreatorField.updateAllCells()}},model:{value:t.nonogramData.colors[e],callback:function(n){t.$set(t.nonogramData.colors,e,n)},expression:"nonogramData.colors[i]"}})],1)}),t._v(" "),n("div",{staticClass:"buttons-change-cells-size"},[t.isInitialScale()?t._e():n("v-btn",{attrs:{flat:"",icon:"",title:"сбросить масштаб"},on:{click:function(e){t.resetScale()}}},[n("v-icon",{attrs:{medium:""}},[t._v("close")])],1),t._v(" "),n("v-btn",{attrs:{flat:"",icon:"",title:"увеличить масштаб"},on:{click:function(e){t.increaseScale()}}},[n("v-icon",{attrs:{medium:""}},[t._v("add")])],1),t._v(" "),n("v-btn",{attrs:{flat:"",icon:"",title:"уменьшить масштаб"},on:{click:function(e){t.decreaseScale()}}},[n("v-icon",{attrs:{medium:""}},[t._v("remove")])],1)],1)],2)],1)],1)],1),t._v(" "),n("div",{ref:"fieldContainer",staticClass:"field-container"},[n("div",{staticClass:"field-border"},[n("resize-sensor",{on:{resize:function(e){t.onResize()}}}),t._v(" "),n("nonogram-creator-field",{ref:"nonogramCreatorField",staticClass:"field"})],1)]),t._v(" "),n("v-container",{staticStyle:{display:"flex"}},[n("v-btn",[t._v("Проверить на решаемость")]),t._v(" "),n("v-btn",{staticStyle:{"margin-left":"auto"},on:{click:function(e){t.createNewNonogramData()}}},[t._v("Создать другой кроссворд")])],1)],1)},r=[],s={render:a,staticRenderFns:r};e.a=s},pAu9:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{light:""}},[n("main",[n("v-content",[n("router-view",[n("v-container",{attrs:{fluid:""}})],1)],1)],1)])},r=[],s={render:a,staticRenderFns:r};e.a=s},qNNU:function(t,e,n){"use strict";function a(t){n("FtPH")}var r=n("w12H"),s=n("mPy0"),o=n("VU/8"),i=a,l=o(r.a,s.a,!1,i,"data-v-71d930cd",null);e.a=l.exports},rOsi:function(t,e,n){"use strict";var a=n("OPXh");e.a={name:"nonogram-table",props:["nonogramData"],data:function(){return{nonogramInput:new a.a(this.nonogramData)}},mounted:function(){window.addEventListener("resize",this.onResize),this.onResize()},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},methods:{onResize:function(){}}}},rSiG:function(t,e){},tziZ:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("div",{ref:"canvasWrapper",staticClass:"canvasWraper"},[n("canvas",{ref:"canvas"})])])},r=[],s={render:a,staticRenderFns:r};e.a=s},uslO:function(t,e,n){function a(t){return n(r(t))}function r(t){var e=s[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var s={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};a.keys=function(){return Object.keys(s)},a.resolve=r,t.exports=a,a.id="uslO"},vLLJ:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-tabs",{attrs:{centered:""}},[n("v-tabs-bar",{staticClass:"white"},[n("v-tabs-item",{attrs:{href:"#tab1",ripple:""}},[t._v("Редактор японских кроссвордов")]),t._v(" "),n("v-tabs-item",{attrs:{href:"#tab2",ripple:""}},[t._v("Недавно созданные кроссворды")]),t._v(" "),n("v-tabs-slider",{attrs:{color:"teal"}})],1),t._v(" "),n("v-tabs-items",[n("v-tabs-content",{attrs:{id:"tab1"}},[n("v-card",{attrs:{flat:""}},[n("v-card-text",[t._v("Content 1")])],1)],1),t._v(" "),n("v-tabs-content",{attrs:{id:"tab2"}},[n("v-card",{attrs:{flat:""}},[n("v-card-text",[t._v("Content 2")])],1)],1)],1)],1)],1)},r=[],s={render:a,staticRenderFns:r};e.a=s},w12H:function(t,e,n){"use strict";function a(t,e,n){return Math.min(n,Math.max(e,t))}var r=n("woOf"),s=n.n(r),o=n("M4fF"),i=n.n(o),l=(n("IP1U"),n("2nnM")),c=n("hRsL"),u=n("Me5U"),h=n("7+uW"),d=n("ND+T");e.a={name:"nonogram-creator",components:{NonogramCreatorField:u.a},data:function(){var t={nonogramSizeMin:5,nonogramSizeMax:100,numberColorsMin:1,numberColorsMax:20,cellSizeScale:1};return t.nonogramData=d.a.getLastNonogram()||l.a.createNewNonogram(7,10,10),t.isColorPickerOpen=new Array(t.numberColorsMax).fill(!1),t.nonogramInput=new c.a(t.nonogramData,this),t.numberRows=t.nonogramData.numberRows,t.numberColumns=t.nonogramData.numberColumns,t.numberColors=t.nonogramData.numberColors,t},mounted:function(){var t=this;window.addEventListener("resize",this.onResize),window.addEventListener("unload",this.saveNonogramDataToLocalStorage),this.$nextTick(function(){return t.onResize()})},beforeDestroy:function(){window.removeEventListener("resize",this.onResize),window.removeEventListener("unload",this.saveNonogramDataToLocalStorage)},methods:{getFieldBorderSize:function(t){return 6+1*(t+1)+2*Math.floor((t-1)/5)},getFieldBorderWidth:function(){return this.getFieldBorderSize(this.nonogramData.numberColumns)},updateStyle:function(t){var e=document.getElementById("fieldCellsStyle");e?e.childNodes[0].nodeValue=t:(e=document.createElement("style"),e.id="fieldCellsStyle",e.type="text/css",e.appendChild(document.createTextNode(t)),document.head.appendChild(e))},onResize:function(){if(!this.$refs.fieldContainer)return void console.warn("this.$refs.fieldContainer === undefined");var t=this.$refs.fieldContainer.clientWidth,e=Math.round(.77*t),n=e-this.getFieldBorderWidth(),a=Math.floor(n/this.nonogramData.numberColumns*this.cellSizeScale);a=Math.max(10,Math.min(50,a)),a=Math.round(a*this.cellSizeScale),this.updateStyle(".field td { height: "+a+"px; width: "+a+"px; min-height: "+a+"px; min-width: "+a+"px; }")},onCellClick:function(t,e){this.nonogramInput.clickCoordinates(t,e),this.$refs.nonogramCreatorField.updateCell(t,e)},getCellColor:function(t,e){var n=this.nonogramData.field[t][e],a=-1!==n,r=this.nonogramInput.isSelected(t,e);return a&&r?"#1de9b6":a?this.nonogramData.colors[n].hex:r?"#00e5ff":""},recreateFieldDebounced:i.a.debounce(function(){this.numberRows=this.nonogramData.numberRows=a(this.numberRows,this.nonogramSizeMin,this.nonogramSizeMax),this.numberColumns=this.nonogramData.numberColumns=a(this.numberColumns,this.nonogramSizeMin,this.nonogramSizeMax),this.nonogramData.extendFieldIfRequired(),this.onResize(),this.$refs.nonogramCreatorField.updateAllCells()},700),updateNumberColorsDebounced:i.a.debounce(function(){this.numberColors=this.nonogramData.numberColors=a(this.numberColors,this.numberColorsMin,this.numberColorsMax),this.$refs.nonogramCreatorField.updateAllCells()},700),isInitialScale:function(){return Math.abs(this.cellSizeScale-1)<.01},increaseScale:function(){this.cellSizeScale*=1.1,this.onResize()},decreaseScale:function(){this.cellSizeScale/=1.1,this.onResize()},resetScale:function(){this.cellSizeScale=1,this.onResize()},showColorPicker:function(t){h.a.set(this.isColorPickerOpen,t,!0)},saveNonogramDataToLocalStorage:function(){for(var t=0,e=0;e<this.nonogramData.numberRows;++e)for(var n=0;n<this.nonogramData.numberColumns;++n)-1!==this.nonogramData.field[e][n]&&++t;var a=(this.nonogramData.numberRows,this.nonogramData.numberColumns,t>0),r=void 0!==this.nonogramData.id;(a||r)&&d.a.saveNonogram(this.nonogramData)},loadNonogramDataFromLocalStorage:function(){this.nonogramData=d.a.getLastNonogram(),this.$refs.nonogramCreatorField.updateAllCells()},createNewNonogramData:function(){this.startEditAnotherNonogram(null)},startEditAnotherNonogram:function(t){this.saveNonogramDataToLocalStorage(),d.a.lastNonogramId=t,s()(this.$data,this.$options.data.apply(this)),this.$refs.nonogramCreatorField.updateAllCells()}}}},xJD8:function(t,e,n){"use strict";e.a={name:"app"}},yHqk:function(t,e,n){"use strict";e.a={name:"nonogram-creator-field",data:function(){return{}},mounted:function(){console.clear(),this.changeTableSizeIfRequired(),this.updateAllCells()},methods:{changeTableSizeIfRequired:function(){for(var t=this.$parent.nonogramData,e=this.$refs.table,n=e.rows.length;n<t.numberRows;++n)e.insertRow();for(;e.rows.length>t.numberRows;)e.deleteRow(-1);for(var a=0;a<t.numberRows;++a){for(var r=e.rows[a],s=r.cells.length;s<t.numberColumns;++s)r.insertCell();for(;r.cells.length>t.numberColumns;)r.deleteCell(-1)}},onTableClick:function(t){var e=t.target,n=e.cellIndex,a=e.parentElement.rowIndex;this.$parent.onCellClick(a,n),this.updateCell(a,n)},updateCell:function(t,e){this.$refs.table.rows[t].cells[e].style.backgroundColor=this.$parent.getCellColor(t,e)},updateAllCells:function(){this.changeTableSizeIfRequired();for(var t=this.$parent.nonogramData,e=0;e<t.numberRows;++e)for(var n=0;n<t.numberColumns;++n)this.updateCell(e,n)}}}}},["NHnr"]);
//# sourceMappingURL=app.59a96947c3b78edc47c5.js.map